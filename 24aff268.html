<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="&#34;auto&#34;"><head><meta charset="UTF-8"><link rel="preconnect" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Montserrat:ital@1&family=Noto+Sans+TC&family=Noto+Serif+SC:wght@200;300&display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@500&display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Montserrat:ital@1&family=Noto+Sans+TC&family=Noto+Serif+SC:wght@200;300&display=swap" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link rel="apple-touch-icon" sizes="76x76" href="/images/dolphin.png"><link rel="icon" type="image/png" href="/images/dolphin.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#433d3c"><meta name="description" content=""><meta name="author" content="Happen"><meta name="keywords" content=""><title>Scrapy Demo - Happenã®Memo</title><link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="/lib/hint/hint.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/rainbow.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_pf9vaxs7x7b.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/bynotes/texiao/source/css/shubiao.css"><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 5.1.1"></head><body><header style="height:60vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/">&nbsp;<strong>Happenã®Memo</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> é¦–é¡µ</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> å½’æ¡£</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> åˆ†ç±»</a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> æ ‡ç­¾</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> å…³äº</a></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-link-fill"></i> å‹é“¾</a></li><li class="nav-item" id="search-btn"><a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" href="javascript:">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div class="banner intro-2" id="background" parallax="true" style="background:url(https://gitee.com/happencc/pics/raw/master/images/about-banner.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="container page-header text-center fade-in-up"><span class="h2" id="subtitle"></span><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> Happen </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2016-04-20 00:05" pubdate>2016-04-20 00:05</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 1.5k å­— </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 19 åˆ†é’Ÿ </span><span id="busuanzi_container_page_pv" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="busuanzi_value_page_pv"></span> æ¬¡</span></div></div></div></div></div></header><main><div class="container-fluid"><div class="row"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-md"><div class="container nopadding-md" id="board-ctn"><div class="py-5" id="board"><article class="post-content mx-auto" id="post"><h1 style="display:none">Scrapy Demo</h1><p class="note note-info">æœ¬æ–‡æœ€åæ›´æ–°äºï¼š2016-04-20 00:05</p><div class="markdown-body" id="post-body"><h2 id="Scrapy- æ˜¯ä»€ä¹ˆ"><a href="#Scrapy- æ˜¯ä»€ä¹ˆ" class="headerlink" title="Scrapy æ˜¯ä»€ä¹ˆ"></a>Scrapy æ˜¯ä»€ä¹ˆ</h2><blockquote><p>Scrapy æ˜¯ä¸€ä¸ªä¸ºäº†çˆ¬å–ç½‘ç«™æ•°æ®ï¼Œæå–ç»“æ„æ€§æ•°æ®è€Œç¼–å†™çš„åº”ç”¨æ¡†æ¶ã€‚ å¯ä»¥åº”ç”¨åœ¨åŒ…æ‹¬æ•°æ®æŒ–æ˜ï¼Œä¿¡æ¯å¤„ç†æˆ–å­˜å‚¨å†å²æ•°æ®ç­‰ä¸€ç³»åˆ—çš„ç¨‹åºä¸­ã€‚<br>å…¶æœ€åˆæ˜¯ä¸ºäº†é¡µé¢æŠ“å– (æ›´ç¡®åˆ‡æ¥è¯´, ç½‘ç»œæŠ“å–)æ‰€è®¾è®¡çš„ï¼Œ ä¹Ÿå¯ä»¥åº”ç”¨åœ¨è·å– API æ‰€è¿”å›çš„æ•°æ® (ä¾‹å¦‚ Amazon Associates Web Services) æˆ–è€…é€šç”¨çš„ç½‘ç»œçˆ¬è™«ã€‚Scrapy ç”¨é€”å¹¿æ³›ï¼Œå¯ä»¥ç”¨äºæ•°æ®æŒ–æ˜ã€ç›‘æµ‹å’Œè‡ªåŠ¨åŒ–æµ‹è¯•ã€‚<br>ç°åœ¨æœ€æ–°ç‰ˆæœ¬ä¸º 1.0ï¼ŒåŒæ—¶æ”¯æŒ 2.7.x å’Œ 3.xã€‚</p></blockquote><a id="more"></a><ul><li><a target="_blank" rel="noopener" href="http://scrapy.org/">å®˜æ–¹ç½‘ç«™</a></li><li><a target="_blank" rel="noopener" href="http://scrapy-chs.readthedocs.org/zh_CN/1.0/intro/tutorial.html">ä¸­æ–‡ç‰ˆ document</a></li></ul><h2 id="Scrapy- æ¶æ„"><a href="#Scrapy- æ¶æ„" class="headerlink" title="Scrapy æ¶æ„"></a>Scrapy æ¶æ„</h2><p>Scrapy ä½¿ç”¨äº† Twisted å¼‚æ­¥ç½‘ç»œåº“æ¥å¤„ç†ç½‘ç»œé€šè®¯, æ•´ä½“æ¶æ„å¤§è‡´å¦‚ä¸‹ï¼š</p><center><img src="https://s1.ax1x.com/2018/10/28/icwTq1.jpg" srcset="/img/loading.gif" width="700"></center><p>Scrapy ä¸»è¦åŒ…æ‹¬äº†ä»¥ä¸‹ç»„ä»¶ï¼š</p><ul><li>Scrapy Engineï¼šç”¨æ¥å¤„ç†æ•´ä¸ªç³»ç»Ÿçš„æ•°æ®æµå¤„ç†ï¼Œè§¦å‘äº‹åŠ¡ã€‚</li><li>Schedulerï¼šç”¨æ¥æ¥å—å¼•æ“å‘è¿‡æ¥çš„è¯·æ±‚ï¼Œå‹å…¥é˜Ÿåˆ—ä¸­ï¼Œå¹¶åœ¨å¼•æ“å†æ¬¡è¯·æ±‚çš„æ—¶å€™è¿”å›ã€‚</li><li>Downloaderï¼šç”¨äºä¸‹è½½ç½‘é¡µå†…å®¹ï¼Œå¹¶å°†ç½‘é¡µå†…å®¹è¿”å›ç»™ Spidersã€‚</li><li>Spidersï¼šSpiders æ˜¯ä¸»è¦å¹²æ´»çš„ï¼Œç”¨å®ƒæ¥åˆ¶è®¢ç‰¹å®šåŸŸåæˆ–ç½‘é¡µçš„è§£æè§„åˆ™ã€‚</li><li>Item Pipelineï¼šè´Ÿè´£å¤„ç†ç”± Spiders ä»ç½‘é¡µä¸­æŠ½å–çš„é¡¹ç›®ï¼Œå®ƒçš„ä¸»è¦ä»»åŠ¡æ˜¯æ¸…æ™°ã€éªŒè¯å’Œå­˜å‚¨æ•°æ®ã€‚å½“é¡µé¢è¢« Spiders è§£æåï¼Œå°†è¢«å‘é€åˆ° Item Pipelineï¼Œå¹¶ç»è¿‡å‡ ä¸ªç‰¹å®šçš„æ¬¡åºå¤„ç†æ•°æ®ã€‚</li><li>Downloader ä¸­é—´ä»¶ï¼šä½äº Scrapy å¼•æ“å’Œä¸‹è½½å™¨ä¹‹é—´çš„é’©å­æ¡†æ¶ï¼Œä¸»è¦æ˜¯å¤„ç† Scrapy å¼•æ“ä¸ä¸‹è½½å™¨ä¹‹é—´çš„è¯·æ±‚åŠå“åº”ã€‚</li><li>Spider ä¸­é—´ä»¶ï¼šä»‹äº Scrapy å¼•æ“å’Œèœ˜è››ä¹‹é—´çš„é’©å­æ¡†æ¶ï¼Œä¸»è¦å·¥ä½œæ˜¯å¤„ç†èœ˜è››çš„å“åº”è¾“å…¥å’Œè¯·æ±‚è¾“å‡ºã€‚</li><li>Scheduler ä¸­é—´ä»¶ï¼šä»‹äº Scrapy å¼•æ“å’Œè°ƒåº¦ä¹‹é—´çš„ä¸­é—´ä»¶ï¼Œä» Scrapy å¼•æ“å‘é€åˆ°è°ƒåº¦çš„è¯·æ±‚å’Œå“åº”ã€‚</li></ul><p>ä½¿ç”¨ Scrapy å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®Œæˆç½‘ä¸Šæ•°æ®çš„é‡‡é›†å·¥ä½œï¼Œå®ƒä¸ºæˆ‘ä»¬å®Œæˆäº†å¤§é‡çš„å·¥ä½œï¼Œè€Œä¸éœ€è¦è‡ªå·±è´¹å¤§åŠ›æ°”å»å¼€å‘ã€‚</p><h2 id="ä¸‹è½½å®‰è£…"><a href="# ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h2><div class="hljs"><pre><code class="hljs python">pip install scrapy</code></pre></div><h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><h3 id="åˆ›å»ºå·¥ç¨‹"><a href="# åˆ›å»ºå·¥ç¨‹" class="headerlink" title="åˆ›å»ºå·¥ç¨‹"></a>åˆ›å»ºå·¥ç¨‹</h3><p>åœ¨ cmd ä¸‹åˆ‡æ¢åˆ°æƒ³åˆ›å»º scrapy é¡¹ç›®çš„åœ°æ–¹ï¼Œç„¶åä½¿ç”¨å‘½å</p><div class="hljs"><pre><code class="hljs python">scrapy startproject tutorial</code></pre></div><p><strong>æ³¨ </strong>ï¼štutorial ä¸ºå·¥ç¨‹å<br>ç„¶åå°±ä¼šå‘ç°åœ¨å½“å‰ä½ç½®ä¼šå¤šå‡ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåå­—æ˜¯ tutorialã€‚å®ƒçš„ç›®å½•ç»“æ„æ˜¯è¿™æ ·çš„ï¼š</p><div class="hljs"><pre><code class="hljs python">tutorial/
    scrapy.cfg
    tutorial/
        spiders/
            __init__.py
        __init__.py
        items.py
        pipelines.py
        settings.py</code></pre></div><p><strong>æ³¨</strong>ï¼š<br>scrapy.cfg æ˜¯è¯¥é¡¹ç›®çš„å…¨å±€é…ç½®æ–‡ä»¶<br>tutorial/: è¯¥é¡¹ç›®çš„ python æ¨¡å—ã€‚<br>tutorial/items.py: é¡¹ç›®ä¸­çš„ item æ–‡ä»¶.<br>tutorial/pipelines.py: é¡¹ç›®ä¸­çš„ pipelines æ–‡ä»¶.<br>tutorial/settings.py: é¡¹ç›®çš„è®¾ç½®æ–‡ä»¶.<br>tutorial/spiders/: æ”¾ç½® spider ä»£ç çš„ç›®å½•.</p><h3 id="å®šä¹‰ -Item"><a href="# å®šä¹‰ -Item" class="headerlink" title="å®šä¹‰ Item"></a>å®šä¹‰ Item</h3><p>Item æ˜¯ä¿å­˜çˆ¬å–åˆ°çš„æ•°æ®çš„å®¹å™¨ï¼›å…¶ä½¿ç”¨æ–¹æ³•å’Œ python å­—å…¸ç±»ä¼¼ã€‚è™½ç„¶æ‚¨ä¹Ÿå¯ä»¥åœ¨ Scrapy ä¸­ç›´æ¥ä½¿ç”¨ dictï¼Œä½†æ˜¯ Item æä¾›äº†é¢å¤–ä¿æŠ¤æœºåˆ¶æ¥é¿å…æ‹¼å†™é”™è¯¯å¯¼è‡´çš„æœªå®šä¹‰å­—æ®µé”™è¯¯ã€‚<br>è¿™é‡Œè¿™æ ·å†™</p><div class="hljs"><pre><code class="hljs python"><span class="hljs-comment"># -*- coding: utf-8 -*-</span>
<span class="hljs-keyword">import</span> scrapy
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DmozItem</span>(<span class="hljs-params">scrapy.Item</span>):</span>
    title = scrapy.Field()
    link = scrapy.Field()
    desc = scrapy.Field()</code></pre></div><p>DmozItem ä¸ºè¯¥ Item çš„åå­—ï¼Œ è¯¥ç±»æ˜¯ä¸€ä¸ª scrapy.Item ç±»ã€‚<br>æˆ‘è¿™é‡Œæƒ³è·å–åˆ°çš„ä¿¡æ¯æ˜¯ titleã€link å’Œ desc è¿™ä¸‰ä¸ªå­—æ®µï¼Œå®ƒä»¬éƒ½æ˜¯ scrapy.Field ç±»å‹çš„ã€‚</p><h3 id="ç¼–å†™çˆ¬è™«"><a href="# ç¼–å†™çˆ¬è™«" class="headerlink" title="ç¼–å†™çˆ¬è™«"></a>ç¼–å†™çˆ¬è™«</h3><p>åœ¨ <code>tutorial/spiders/</code>ä¸‹åˆ›å»ºä¸€ä¸ª py æ–‡ä»¶ <code>dmoz_spider.py</code>ï¼Œå®ƒæ˜¯è¿™æ ·å®šä¹‰çš„ï¼š</p><div class="hljs"><pre><code class="hljs python">
<span class="hljs-keyword">import</span> scrapy
<span class="hljs-keyword">from</span> tutorial.items <span class="hljs-keyword">import</span> DmozItem

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DmozSpider</span>(<span class="hljs-params">scrapy.Spider</span>):</span>
    name = <span class="hljs-string">&#x27;dmoz&#x27;</span>
    allowed_domains = [<span class="hljs-string">&#x27;dmoz.org&#x27;</span>]
    start_urls = [<span class="hljs-string">&quot;http://www.dmoz.org/Computers/Programming/Languages/Python/Books/&quot;</span>,
        <span class="hljs-string">&quot;http://www.dmoz.org/Computers/Programming/Languages/Python/Resources/&quot;</span>
    ]

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">parse</span>(<span class="hljs-params">self, response</span>):</span>
        sel = Selector(response)
        sites = sel.xpath(<span class="hljs-string">&#x27;//ul[@class=&quot;directory-url&quot;]/li&#x27;</span>)
        <span class="hljs-keyword">for</span> sel <span class="hljs-keyword">in</span> sites:
            item = DmozItem() <span class="hljs-comment"># å®ä¾‹åŒ–ä¸€ä¸ª DmozItem ç±»</span>
            item[<span class="hljs-string">&#x27;title&#x27;</span>] = sel.xpath(<span class="hljs-string">&#x27;a/text()&#x27;</span>).extract()
            item[<span class="hljs-string">&#x27;link&#x27;</span>] = sel.xpath(<span class="hljs-string">&#x27;a/@href&#x27;</span>).extract()
            item[<span class="hljs-string">&#x27;desc&#x27;</span>] = sel.xpath(<span class="hljs-string">&#x27;text()&#x27;</span>).extract()
            <span class="hljs-keyword">yield</span> item</code></pre></div><p>çˆ¬è™«ç±»å¿…é¡»ç»§æ‰¿è‡ª<code>scrapy.Spider</code> ç±»ï¼Œ ä¸”å®šä¹‰ä¸€äº›å±æ€§:</p><p><strong>name</strong>: ç”¨äºåŒºåˆ« Spiderã€‚ è¯¥åå­—å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œä¸å¯ä»¥ä¸ºä¸åŒçš„ Spider è®¾å®šç›¸åŒçš„åå­—ã€‚<br><strong>start_urls</strong>: åŒ…å«äº† Spider åœ¨å¯åŠ¨æ—¶è¿›è¡Œçˆ¬å–çš„ url åˆ—è¡¨ã€‚ å› æ­¤ï¼Œç¬¬ä¸€ä¸ªè¢«è·å–åˆ°çš„é¡µé¢å°†æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œ åç»­çš„ URL åˆ™ä»åˆå§‹çš„ URL è·å–åˆ°çš„æ•°æ®ä¸­æå–ã€‚<br><code>parse()</code> æ˜¯ spider çš„ä¸€ä¸ªæ–¹æ³•ã€‚ è¢«è°ƒç”¨æ—¶ï¼Œæ¯ä¸ªåˆå§‹ URL å®Œæˆä¸‹è½½åç”Ÿæˆçš„ Response å¯¹è±¡å°†ä¼šä½œä¸ºå”¯ä¸€çš„å‚æ•°ä¼ é€’ç»™è¯¥å‡½æ•°ã€‚ è¯¥æ–¹æ³•è´Ÿè´£è§£æè¿”å›çš„æ•°æ® (response data)ï¼Œæå–æ•°æ®(ç”Ÿæˆ item) ä»¥åŠç”Ÿæˆéœ€è¦è¿›ä¸€æ­¥å¤„ç†çš„ URL çš„ Request å¯¹è±¡ã€‚scrapy ä¸º Spider çš„ start_urls å±æ€§ä¸­çš„æ¯ä¸ª URL åˆ›å»ºäº† scrapy.Request å¯¹è±¡ï¼Œå¹¶å°† parse æ–¹æ³•ä½œä¸ºå›è°ƒå‡½æ•° (callback) èµ‹å€¼ç»™äº† Requestã€‚Request å¯¹è±¡ç»è¿‡è°ƒåº¦ï¼Œæ‰§è¡Œç”Ÿæˆ scrapy.http.Response å¯¹è±¡å¹¶é€å›ç»™ spider parse() æ–¹æ³•, ä¸€èˆ¬è¿”å› Item å®ä¾‹ã€‚</p><h3 id="çˆ¬å–"><a href="# çˆ¬å–" class="headerlink" title="çˆ¬å–"></a>çˆ¬å–</h3><p>è¿›å…¥è¯¥å·¥ç¨‹ç›®å½•ï¼Œæœ¬ä¾‹ä¸­å°±æ˜¯ tutorial/, åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ</p><div class="hljs"><pre><code class="hljs python">scrapy crawl dmoz</code></pre></div><h3 id="ä¿å­˜"><a href="# ä¿å­˜" class="headerlink" title="ä¿å­˜"></a>ä¿å­˜</h3><p>å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤</p><div class="hljs"><pre><code class="hljs python">scrapy crawl dmoz -o items.json</code></pre></div><p>è¯¥å‘½ä»¤æ˜¯è¯´å°†ç»“æœä¿å­˜åœ¨ items.json æ–‡ä»¶ä¸­ã€‚</p><h2 id="å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·"><a href="# å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·" class="headerlink" title="å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·"></a>å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·</h2><div class="hljs"><pre><code class="hljs other"># åˆ›å»ºé¡¹ç›®
scrapy startproject myproject
# å¸®åŠ©ä¿¡æ¯
scrapy &lt;command&gt; -h
# å¸®åŠ©ä¿¡æ¯
scrapy -h
# ä½¿ç”¨ä¸‹è½½å™¨ä¸‹è½½æŒ‡å®šçš„ urlï¼Œå¹¶å°†è·å–åˆ°çš„å†…å®¹é€åˆ°æ ‡å‡†è¾“å‡º
scrapy fetch &lt;url&gt;
# åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ç»™å®šçš„ URLï¼Œå¹¶ä»¥ Scrapy spider è·å–åˆ°çš„å½¢å¼å±•ç°
scrapy view &lt;url&gt;
# ä»¥ç»™å®šçš„ URL(å¦‚æœç»™å‡º)æˆ–è€…ç©º (æ²¡æœ‰ç»™å‡º URL) å¯åŠ¨ Scrapy shell
scrapy shell [url]
#åœ¨æœªåˆ›å»ºé¡¹ç›®çš„æƒ…å†µä¸‹ï¼Œè¿è¡Œä¸€ä¸ªç¼–å†™åœ¨ Python æ–‡ä»¶ä¸­çš„ spider
scrapy runspider &lt;spider_file.py&gt;
# è·å– Scrapy çš„è®¾å®š
scrapy settings [options]
------------------------- ä»¥ä¸Šä¸éœ€è¦é¡¹ç›®ï¼Œä»¥ä¸‹éœ€è¦åœ¨é¡¹ç›®ä¸­ ----------------------------------------
# ä½¿ç”¨ template æ¨¡ç‰ˆæ¥ä¿¡åˆ›å»ºä¸€ä¸ª spiderï¼Œ name å€¼ä¸º &lt;name&gt;, allowed_domains å€¼ä¸º &lt;domain&gt;
scrapy genspider [-t template] &lt;name&gt; &lt;domain&gt;
# æŸ¥çœ‹å¯ç”¨çš„æ¨¡ç‰ˆï¼Œé»˜è®¤æœ‰ basicã€crawlã€csvfeed å’Œ xmlfeed 4 ä¸ª
scrapy genspider -l
# æŸ¥çœ‹ TEMPLATE ä¿¡æ¯
scrapy genspider -d TEMPLATE
# ä½¿ç”¨ &lt;spider&gt; è¿›è¡Œçˆ¬å–æ•°æ®
scrapy crawl &lt;spider&gt;
# åˆ—å‡ºå½“å‰é¡¹ç›®ä¸­æ‰€æœ‰å¯ç”¨çš„ spider
scrapy list
# è¿è¡Œ contract æ£€æŸ¥ã€‚
scrapy check [-l] &lt;spider&gt;
# è·å–ç»™å®šçš„ URL å¹¶ä½¿ç”¨ç›¸åº”çš„ spider åˆ†æå¤„ç†ï¼Œå¯ä»¥è§£ææˆè‡ªå·±å†™çš„ item
scrapy parse &lt;url&gt; [options]
</code></pre></div></div><hr><div><div class="post-metas mb-3"><div class="post-meta mr-3"><i class="iconfont icon-category"></i> <a class="hover-with-bg" href="/categories/python/">python</a></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a class="hover-with-bg" href="/tags/%E7%88%AC%E8%99%AB/">çˆ¬è™«</a></div></div><p class="note note-warning">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p><div class="post-prevnext row"><article class="post-prev col-6"><a href="/f49a9b8a.html"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">sublime text3 é…ç½® [python ç¯‡]</span> <span class="visible-mobile">ä¸Šä¸€ç¯‡</span></a></article><article class="post-next col-6"><a href="/5e988508.html"><span class="hidden-mobile">hexo + gitpages æ­å»ºåšå®¢</span> <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article class="comments" id="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zNjg1MS8xMzM4Nw"><script type="text/javascript">function loadLivere(){addScript("https://cdn-city.livere.com/js/embed.dist.js")}waitElementVisible("lv-container",loadLivere)</script><noscript>ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·å…è®¸ JavaScript è¿è¡Œ</noscript></div></article></article></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p><div id="tocbot"></div></div></div></div></div></main><a id="scroll-top-button" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div><footer class="mt-5"><div class="text-center py-3"><div><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="footer-content"><div><span id="timeDate">è½½å…¥å¤©æ•°...</span> <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span><script>var now=new Date;function createtime(){var n=new Date("04/03/2016 00:00:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="ğŸš€ &nbsp"+dnum+"&nbspå¤©",document.getElementById("times").innerHTML=hnum+"&nbspå°æ—¶&nbsp"+mnum+"&nbspåˆ†&nbsp"+snum+"&nbspç§’"}setInterval("createtime()",250)</script></div></div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv"></span> æ¬¡ </span><span id="busuanzi_container_site_uv" style="display:none">æ€»è®¿å®¢æ•° <span id="busuanzi_value_site_uv"></span> äºº</span></div></div></footer><script src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script><script src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js"></script><script src="/js/debouncer.js"></script><script src="/js/main.js"></script><script src="/js/lazyload.js"></script><script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js"></script><script src="/js/clipboard-use.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js"></script><script>$(document).ready(function(){var t=$("#board-ctn").offset().top;tocbot.init({tocSelector:"#tocbot",contentSelector:"#post-body",headingSelector:"h1,h2,h3,h4,h5,h6",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",collapseDepth:3,scrollSmooth:!0,headingsOffset:-t}),0<$(".toc-list-item").length&&$("#toc").css("visibility","visible")})</script><script src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js"></script><script>var typed=new Typed("#subtitle",{strings:["  ","Scrapy Demo&nbsp;"],cursorChar:"|",typeSpeed:72,loop:!1});typed.stop(),$(document).ready(function(){$(".typed-cursor").addClass("h2"),typed.start()})</script><script src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js"></script><script>anchors.options = {
      placement: "right",
      visible: "hover",
      
      icon: "Â§"
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))</script><script src="/js/local-search.js"></script><script>var path="/local-search.xml",inputArea=document.querySelector("#local-search-input");inputArea.onclick=function(){searchFunc(path,"local-search-input","local-search-result"),this.onclick=null}</script><script src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js"></script><link rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css"><script>$("#post img:not(.no-zoom img, img[no-zoom]), img[zoom]").each(function(){var t=document.createElement("a");$(t).attr("data-fancybox","images"),$(t).attr("href",$(this).attr("src")),$(this).wrap(t)})</script><script defer>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?14630c2a053c5952e46094f24dabb623";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></body></html>