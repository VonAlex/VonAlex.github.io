<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="&#34;auto&#34;"><head><meta charset="UTF-8"><link rel="preconnect" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Montserrat:ital@1&family=Noto+Sans+TC&family=Noto+Serif+SC:wght@200;300&display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@500&display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Montserrat:ital@1&family=Noto+Sans+TC&family=Noto+Serif+SC:wght@200;300&display=swap" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link rel="apple-touch-icon" sizes="76x76" href="/images/dolphin.png"><link rel="icon" type="image/png" href="/images/dolphin.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#433d3c"><meta name="description" content=""><meta name="author" content="Happen"><meta name="keywords" content=""><title>çˆ¬è™«é—®é¢˜æ€»ç»“ - Happenã®Memo</title><link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="/lib/hint/hint.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/rainbow.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_pf9vaxs7x7b.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/bynotes/texiao/source/css/shubiao.css"><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 5.1.1"></head><body><header style="height:60vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/">&nbsp;<strong>Happenã®Memo</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> é¦–é¡µ</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> å½’æ¡£</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> åˆ†ç±»</a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> æ ‡ç­¾</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> å…³äº</a></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-link-fill"></i> å‹é“¾</a></li><li class="nav-item" id="search-btn"><a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" href="javascript:">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div class="banner intro-2" id="background" parallax="true" style="background:url(https://gitee.com/happencc/pics/raw/master/images/about-banner.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="container page-header text-center fade-in-up"><span class="h2" id="subtitle"></span><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> Happen </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2016-05-29 14:32" pubdate>2016-05-29 14:32</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 2.3k å­— </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 27 åˆ†é’Ÿ </span><span id="busuanzi_container_page_pv" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="busuanzi_value_page_pv"></span> æ¬¡</span></div></div></div></div></div></header><main><div class="container-fluid"><div class="row"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-md"><div class="container nopadding-md" id="board-ctn"><div class="py-5" id="board"><article class="post-content mx-auto" id="post"><h1 style="display:none">çˆ¬è™«é—®é¢˜æ€»ç»“</h1><p class="note note-info">æœ¬æ–‡æœ€åæ›´æ–°äºï¼š2016-05-29 14:32</p><div class="markdown-body" id="post-body"><p>æœ¬æ–‡æ¡£å¯¹æ—¥å¸¸å­¦ä¹ ä¸­ç”¨ python åšæ•°æ®çˆ¬å–æ—¶æ‰€é‡åˆ°çš„ä¸€äº›é—®é¢˜åšç®€è¦è®°å½•ï¼Œä»¥ä¾¿æ—¥åæŸ¥é˜…ï¼Œéƒ¨åˆ†é—®é¢˜å¯èƒ½å› ä¸ºè®¤è¯†ä¸åˆ°ä½ä¼šå­˜åœ¨ä¸€äº›è¯¯è§£ï¼Œæ•¬è¯·å‘ŠçŸ¥ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼Œå…±åŒè¿›æ­¥ã€‚<br><a id="more"></a></p><h2 id="ä¼°ç®—ç½‘ç«™è§„æ¨¡"><a href="# ä¼°ç®—ç½‘ç«™è§„æ¨¡" class="headerlink" title="ä¼°ç®—ç½‘ç«™è§„æ¨¡"></a>ä¼°ç®—ç½‘ç«™è§„æ¨¡</h2><p>è¯¥å°èŠ‚ä¸»è¦é’ˆå¯¹äºæ•´ç«™çˆ¬å–çš„æƒ…å†µã€‚<br>çˆ¬å–æ•´ç«™ä¹‹å‰ï¼Œè‚¯å®šæ˜¯è¦å…ˆå¯¹ä¸€ä¸ªç½‘ç«™çš„è§„æ¨¡è¿›è¡Œä¼°è®¡ã€‚è¿™æ˜¯å¯ä»¥ä½¿ç”¨ google æœç´¢æŸ¥çœ‹å¤§æ¦‚æœ‰å¤šå°‘ä¸ªç½‘å€ï¼Œè¿™é‡Œä½¿ç”¨åˆ° google æœç´¢çš„ä¸€ä¸ªå°æŠ€å·§ã€‚<br><div class="hljs"><pre><code class="hljs othe">site:url åœ°å€ </code></pre></div><br>æœ‰çš„æ—¶å€™å¯æŸ¥çœ‹ç½‘ç«™çš„ sitemap.xmlï¼Œä½†å®ƒæœ‰æ—¶å€™ä¼šè¿‡æœŸæˆ–è€…æ»åï¼Œä¸æ˜¯å¾ˆå‡†ç¡®ã€‚</p><h2 id="è¯†åˆ«ç½‘ç«™æ‰€ç”¨æŠ€æœ¯"><a href="# è¯†åˆ«ç½‘ç«™æ‰€ç”¨æŠ€æœ¯" class="headerlink" title="è¯†åˆ«ç½‘ç«™æ‰€ç”¨æŠ€æœ¯"></a>è¯†åˆ«ç½‘ç«™æ‰€ç”¨æŠ€æœ¯</h2><p>è¦çˆ¬çš„ç½‘ç«™ä½¿ç”¨çš„æŠ€æœ¯ä¼šå½±å“åˆ°æˆ‘ä»¬æ‰€å†™çš„ä»£ç ä¸­çš„å¤„ç†æ‰‹æ®µã€‚<br>æ¨èä½¿ç”¨ <strong>builtwith</strong> è¿™ä¸ªç¬¬ä¸‰æ–¹åŒ…ï¼Œå¯ä»¥ä½¿ç”¨ <strong>pip</strong> æ¥å®‰è£…ã€‚<br>ç®€å•ä½¿ç”¨å¦‚ä¸‹ï¼š<br><div class="hljs"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">import</span> builtwith

In [<span class="hljs-number">2</span>]: builtwith.parse(<span class="hljs-string">&#x27;http://example.webscraping.com/&#x27;</span>)
Out[<span class="hljs-number">2</span>]:
&#123;<span class="hljs-string">u&#x27;javascript-frameworks&#x27;</span>: [<span class="hljs-string">u&#x27;jQuery&#x27;</span>, <span class="hljs-string">u&#x27;Modernizr&#x27;</span>, <span class="hljs-string">u&#x27;jQuery UI&#x27;</span>],
 <span class="hljs-string">u&#x27;programming-languages&#x27;</span>: [<span class="hljs-string">u&#x27;Python&#x27;</span>],
 <span class="hljs-string">u&#x27;web-frameworks&#x27;</span>: [<span class="hljs-string">u&#x27;Web2py&#x27;</span>, <span class="hljs-string">u&#x27;Twitter Bootstrap&#x27;</span>],
 <span class="hljs-string">u&#x27;web-servers&#x27;</span>: [<span class="hljs-string">u&#x27;Nginx&#x27;</span>]&#125;</code></pre></div></p><h2 id="ä¼ªè£…æˆæµè§ˆå™¨"><a href="# ä¼ªè£…æˆæµè§ˆå™¨" class="headerlink" title="ä¼ªè£…æˆæµè§ˆå™¨"></a>ä¼ªè£…æˆæµè§ˆå™¨</h2><p>UAï¼Œå³ User-Agentï¼Œæ˜¯ Http åè®®çš„ä¸€éƒ¨åˆ†ï¼Œå±äºå¤´åŸŸçš„ç»„æˆéƒ¨åˆ†ï¼Œå‘é€ http è¯·æ±‚æ—¶ï¼Œè¯·æ±‚å¤´ä¸­ä¼šæœ‰ <strong>User-Agent</strong> å­—æ®µã€‚æœåŠ¡å™¨é€šè¿‡è¯¥å­—æ®µæ¥åˆ†è¾¨å‘é€è¯·æ±‚çš„æµè§ˆå™¨ç±»å‹ã€ç‰ˆæœ¬ã€å†…æ ¸ä»¥åŠæ“ä½œç³»ç»Ÿä¿¡æ¯ç­‰ã€‚<br>åœ¨æµè§ˆå™¨ console å¯ç”¨å¦‚ä¸‹å‘½ä»¤æ¥è·å¾—è¯¥æµè§ˆå™¨çš„ UA æ ‡è¯† <code>navigator.userAgent</code></p><p>éƒ¨åˆ†ç½‘ç«™ä¸æƒ³è¢«çˆ¬è™«çˆ¬å–å°±ä¼šæ£€æŸ¥ http è¯·æ±‚å¤´çš„è¯¥å­—æ®µå†…å®¹ï¼Œ æ‰€ä»¥åœ¨ç”¨çˆ¬è™«åšæŠ“å–æ—¶ï¼Œé€šå¸¸è¦åœ¨è¯·æ±‚å¤´åŠ ä¸Šè¯¥å­—æ®µï¼Œä»¥æŠŠè‡ªå·±ä¼ªè£…æˆæµè§ˆå™¨ã€‚<strong>æœ‰æ—¶å€™é€šè¿‡æ‰‹æœºæµè§ˆå™¨è®¿é—®å¾—åˆ°çš„é¡µé¢ä¼šæ›´åŠ ç®€æ´ï¼Œæ›´å®¹æ˜“æŠ“å–ï¼Œæ‰€ä»¥ä¼ªè£…æˆæ‰‹æœºæµè§ˆå™¨ä¹Ÿæ˜¯ä¸€ç§å¥½æ–¹æ³•ã€‚</strong><br>ç½‘ä¸Šæœ‰å¾ˆå¤šæ•´ç†çš„ä¸åŒæµè§ˆå™¨çš„ UA ï¼Œæ¯”å¦‚ <a target="_blank" rel="noopener" href="http://my.oschina.net/sub/blog/203139">å„ç§æµè§ˆå™¨ UserAgent ä¸€è§ˆè¡¨ </a>ã€‚<br><a target="_blank" rel="noopener" href="http://litten.github.io/2014/09/26/history-of-browser-useragent/">æµè§ˆå™¨é‡å² UserAgent åˆ—ä¼ ï¼ˆä¸Šï¼‰</a>å’Œ <a target="_blank" rel="noopener" href="http://litten.github.io/2014/10/05/history-of-browser-useragent2/">æµè§ˆå™¨é‡å² UserAgent åˆ—ä¼ ï¼ˆä¸‹ï¼‰</a>ï¼Œè¿™ä¸¤ç¯‡æ–‡ç« ç»†è¯´äº† UA çš„æ¥é¾™å»è„‰ï¼Œå»æ„Ÿå—ä¸‹å½“æ—¶æ³¢æ¾œå£®é˜”çš„â€œæµè§ˆå™¨ä¹‹æˆ˜â€ã€‚</p><h2 id="é˜²ç›—é“¾"><a href="# é˜²ç›—é“¾" class="headerlink" title="é˜²ç›—é“¾"></a>é˜²ç›—é“¾</h2><p>éƒ¨åˆ†æœåŠ¡å™¨ä¼šæ£€æŸ¥ http è¯·æ±‚å¤´çš„ <strong>Referer</strong> å­—æ®µæ¥åˆ¤æ–­ä½ æ˜¯å¦æ˜¯ä»æŒ‡å®šé¡µé¢è·³è½¬è€Œæ¥çš„ï¼Œä»¥è¾¾åˆ°é˜²ç›—é“¾çš„ä½œç”¨ã€‚å› æ­¤åœ¨ä¼ªè£…è¯·æ±‚å¤´éƒ¨çš„æ—¶å€™ï¼Œè¯¥å­—æ®µä¹Ÿæ˜¯ä¸å®¹å¿½è§†çš„ã€‚</p><h2 id="url- ç¼–ç "><a href="#url- ç¼–ç " class="headerlink" title="url ç¼–ç "></a>url ç¼–ç </h2><p>æˆ‘ä»¬å‘ç°ï¼ŒURL ä¸­æœ‰æ—¶å€™å­˜åœ¨ä¸­æ–‡ï¼Œè¿™æ˜¯å°±éœ€è¦å¯¹ url è¿›è¡Œç¼–ç ã€‚<br>å¯ä»¥å…ˆå°†ä¸­æ–‡è½¬æ¢æˆ utf-8 ç¼–ç ï¼Œç„¶åä½¿ç”¨ urllib2.quote æ–¹æ³•å¯¹å‚æ•°è¿›è¡Œ url ç¼–ç åä¼ é€’ã€‚<br><div class="hljs"><pre><code class="hljs python"><span class="hljs-keyword">import</span> urllib
param = <span class="hljs-string">u&#x27; ä½ å¥½ &#x27;</span>
param = param.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)
param = urllib.quote(param)</code></pre></div><br>å¯¹äº url æ¥è¯´ï¼Œä¹‹æ‰€ä»¥è¦è¿›è¡Œç¼–ç ï¼Œæ˜¯å› ä¸º url ä¸­æœ‰äº›å­—ç¬¦ä¼šå¼•èµ·æ­§ä¹‰ã€‚<br>åŒç†ä½¿ç”¨ unquote å¯ä»¥è§£ç ã€‚</p><h2 id="åŠ¨æ€åŠ è½½é—®é¢˜"><a href="# åŠ¨æ€åŠ è½½é—®é¢˜" class="headerlink" title="åŠ¨æ€åŠ è½½é—®é¢˜"></a>åŠ¨æ€åŠ è½½é—®é¢˜</h2><p>ç»å¸¸ä¼šé‡åˆ°è¿™æ ·æƒ…å†µï¼šå°†ç½‘é¡µæ‹–åˆ°åº•éƒ¨ä¼šè‡ªåŠ¨å¾€ä¸‹åŠ è½½æ–°çš„æ•°æ®ï¼Œæˆ–è€…æœ‰ <strong>åŠ è½½æ›´å¤š </strong>è¿™æ ·çš„æŒ‰é’®ï¼Œè¿™é‡Œè¯´çš„å°±æ˜¯ AJAX äº†ã€‚</p><blockquote><p>AJAX æ˜¯ Asynchronous JavaScript and XMLï¼ˆå¼‚æ­¥çš„ JavaScript å’Œ XMLï¼‰çš„ç¼©å†™ã€‚å®ƒé€šè¿‡ä½¿ç”¨åŸæœ‰çš„ web æ ‡å‡†ç»„ä»¶ï¼Œå®ç°äº†åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œä¸æœåŠ¡å™¨è¿›è¡Œæ•°æ®äº¤äº’ã€‚ä¾‹å¦‚åœ¨æ–°æµªå¾®åšä¸­ï¼Œä½ å¯ä»¥å±•å¼€ä¸€æ¡å¾®åšçš„è¯„è®ºï¼Œè€Œä¸éœ€è¦é‡æ–°åŠ è½½ï¼Œæˆ–è€…æ‰“å¼€ä¸€ä¸ªæ–°çš„é¡µé¢ã€‚ä½†æ˜¯è¿™äº›å†…å®¹å¹¶ä¸æ˜¯ä¸€å¼€å§‹å°±åœ¨é¡µé¢ä¸­çš„ï¼ˆè¿™æ ·é¡µé¢å°±å¤ªå¤§äº†ï¼‰ï¼Œè€Œæ˜¯åœ¨ä½ ç‚¹å‡»çš„æ—¶å€™è¢«åŠ è½½è¿›æ¥çš„ã€‚è¿™å°±å¯¼è‡´äº†ä½ æŠ“å–è¿™ä¸ªé¡µé¢çš„æ—¶å€™ï¼Œå¹¶ä¸èƒ½è·å¾—è¿™äº›è¯„è®ºä¿¡æ¯ï¼ˆå› ä¸ºä½ æ²¡æœ‰ã€å±•å¼€ã€ï¼‰ã€‚</p><p>AJAX ä¸€èˆ¬æ˜¯é€šè¿‡ XMLHttpRequest å¯¹è±¡æ¥å£å‘é€è¯·æ±‚çš„ï¼ŒXMLHttpRequest ä¸€èˆ¬è¢«ç¼©å†™ä¸º XHRã€‚</p></blockquote><h3 id="é€šè¿‡å®¡æŸ¥å…ƒç´ æ‰¾è¯·æ±‚çš„ -js- åœ°å€"><a href="# é€šè¿‡å®¡æŸ¥å…ƒç´ æ‰¾è¯·æ±‚çš„ -js- åœ°å€" class="headerlink" title="é€šè¿‡å®¡æŸ¥å…ƒç´ æ‰¾è¯·æ±‚çš„ js åœ°å€"></a>é€šè¿‡å®¡æŸ¥å…ƒç´ æ‰¾è¯·æ±‚çš„ js åœ°å€</h3><p>è¿™äº› js çš„åå­—é€šå¸¸çœ‹èµ·æ¥ä¸å…¶ä»–çš„ä¸å¤ªä¸€æ ·ã€‚<br>æ‹¿ <a target="_blank" rel="noopener" href="http://www.thepaper.cn/">æ¾æ¹ƒç½‘ </a>ä¸¾ä¸ªæ —å­ï¼Œè¿™æ‰æ˜¯å‘é€è¯·æ±‚è·å¾—æ–‡ç« çš„çœŸæ­£åœ°å€ï¼Œ</p><p><center><img src="https://s1.ax1x.com/2018/10/28/icw4xJ.jpg" srcset="/img/loading.gif" width="800"></center><br>AJAX çš„ä¸€ç§ <strong>å¸¸è§ç”¨æ³• </strong>æ˜¯ä½¿ç”¨ AJAX åŠ è½½ JSON æ•°æ®ï¼Œç„¶ååœ¨æµè§ˆå™¨ç«¯æ¸²æŸ“ã€‚<br>è¿™ç§æƒ…å†µå¾ˆå¥½å¤„ç†ï¼Œå› ä¸º python è‡ªå¸¦çš„å¤„ç† json çš„åº“ï¼Œä¸¾ä¸ªæ —å­ï¼š<br><a target="_blank" rel="noopener" href="http://www.wandoujia.com/top/game">è±Œè±†èšå®‰å“æ¸¸æˆæ’è¡Œæ¦œ </a>ï¼Œæ¯æ¬¡ç‚¹å‡»æ›´å¤šä¼šåŠ è½½æ–°çš„æ•°æ®ã€‚åœ¨å®¡æŸ¥å…ƒç´ é‡Œï¼Œå¯ä»¥çœ‹åˆ°æ¯æ¬¡ç‚¹å‡»<strong> æŸ¥çœ‹æ›´å¤š</strong>ï¼Œéƒ½ä¼šè¿”å›ä¸€ä¸ªåŒ…å«åº”ç”¨æ•°æ®è¯¦ç»†ä¿¡æ¯çš„æ•°æ®ã€‚</p><p><center><img src="https://s1.ax1x.com/2018/10/28/icwjRe.jpg" srcset="/img/loading.gif" width="800"></center><br>æŸ¥çœ‹è¯·æ±‚ json æ•°æ®çš„åœ°å€<br><a target="_blank" rel="noopener" href="http://apps.wandoujia.com/api/v1/apps?type=weeklytopgame&amp;max=12&amp;start=60">http://apps.wandoujia.com/api/v1/apps?type=weeklytopgame&amp;max=12&amp;start=60</a><br>max å‚æ•°çš„å€¼è¡¨ç¤ºè¿™ä¸€æ¬¡è¯·æ±‚è¿”å›å¤šå°‘ä¸ª app ä¿¡æ¯ï¼Œ start å‚æ•°çš„å€¼è¡¨ç¤ºä»ç¬¬å‡ ä¸ª app å¼€å§‹ï¼Œstart ä» 0 å¼€å§‹ã€‚</p><p>å¦å¤–ï¼Œåœ¨æ„å»ºè¯·æ±‚å¤´æ—¶ï¼Œåº”è¯¥åŠ ä¸Šè¿™ä¸ªå‚æ•° <strong>â€˜X-Requested-Withâ€™: â€˜XMLHttpRequestâ€™</strong>, å½“ä½¿ç”¨ XHR å‘é€ AJAX è¯·æ±‚æ—¶ Header ä¼šå¸¦ä¸Šè¿™ä¸ªå­—æ®µï¼Œå¸¸è¢«ç”¨äºåˆ¤æ–­æ˜¯ä¸æ˜¯ AJAX è¯·æ±‚ã€‚</p><h3 id="Selenium-PhantomJS"><a href="#Selenium-PhantomJS" class="headerlink" title="Selenium+PhantomJS"></a>Selenium+PhantomJS</h3><blockquote><p>Selenium æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ç½‘ç»œæ•°æ®é‡‡é›†å·¥å…·ï¼Œæœ€åˆæ˜¯ä¸ºç½‘ç«™è‡ªåŠ¨æµ‹è¯•è€Œå¼€å‘çš„ã€‚å®ƒå¯ä»¥è®©æµè§ˆå™¨è‡ªåŠ¨åŠ è½½é¡µé¢ï¼Œè·å–æ‰€éœ€è¦çš„æ•°æ®ï¼Œç”šè‡³é¡µé¢æˆªå±ï¼Œæˆ–è€…åˆ¤æ–­ç½‘ç«™ä¸ŠæŸäº›åŠ¨ä½œäº‹éƒ½å‘ç”Ÿã€‚</p></blockquote><p>å¯¹åº”çš„ python åº“ï¼Œå¯ä»¥ç”¨ pip å®‰è£…ã€‚<br>PhantomJS æ˜¯ä¸€ä¸ª headless browserï¼Œå®ƒä¼šæŠŠç½‘ç«™åŠ è½½åˆ°å†…å­˜å¹¶æ‰§è¡Œé¡µé¢ä¸Šçš„ JavaScriptï¼Œä½†æ˜¯ä¸ä¼šå‘ç”¨æˆ·å±•ç¤ºç½‘é¡µçš„å›¾å½¢ç•Œé¢ã€‚<strong>å®ƒä¸æ˜¯ python åº“ï¼Œéœ€è¦å•ç‹¬ä¸‹è½½ </strong>(å–ï¼Œä½ è¦çš„<a target="_blank" rel="noopener" href="http://phantomjs.org/"> å®˜ç½‘ </a>)ã€‚<br>å†™ä¸€ä¸ªç®€å•çš„æ —å­ï¼š<br><div class="hljs"><pre><code class="hljs python"><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver
<span class="hljs-keyword">from</span> selenium.webdriver.common.keys <span class="hljs-keyword">import</span> Keys

driver = webdriver.PhantomJS(executable_path=<span class="hljs-string">&#x27;&lt;Path to PhantomJs&gt;&#x27;</span>)
driver.get(<span class="hljs-string">&quot;http://www.python.org&quot;</span>)
<span class="hljs-keyword">assert</span> <span class="hljs-string">&quot;Python&quot;</span> <span class="hljs-keyword">in</span> driver.title
elem = driver.find_element_by_name(<span class="hljs-string">&quot;q&quot;</span>)
elem.clear()
elem.send_keys(<span class="hljs-string">&quot;pycon&quot;</span>)
elem.send_keys(Keys.RETURN)
<span class="hljs-keyword">assert</span> <span class="hljs-string">&quot;No results found.&quot;</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> driver.page_source
driver.close()</code></pre></div><br><strong>Path to PhantomJs</strong> å¤„ éœ€è¦æŒ‡å®šä½ç½®ï¼Œå¦‚æœè¯¥è·¯å¾„å·²ç»åŠ å…¥åˆ°äº†ç¯å¢ƒå˜é‡ä¸­ï¼Œé‚£ä¹ˆå¯ä»¥ä¸åŠ è¿™ä¸ªå‚æ•°ã€‚<br>è¿™é‡Œåªæ˜¯ä¸ªç®€å•çš„ä»‹ç»ï¼Œåç»­ä¼šå¯¹ Selenium çš„ python ç‰ˆ API çš„ä½¿ç”¨åšå•ç‹¬ä»‹ç»ã€‚</p><h2 id="ä»£ç†é—®é¢˜"><a href="# ä»£ç†é—®é¢˜" class="headerlink" title="ä»£ç†é—®é¢˜"></a>ä»£ç†é—®é¢˜</h2><p>éƒ¨åˆ†ç½‘ç«™å¯¹ ip è¿›è¡Œäº†é™åˆ¶ï¼Œå¯¼è‡´æˆ‘ä»¬æ— æ³•çˆ¬åˆ°æƒ³è¦çš„æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ç”¨ä»£ç†æ¥åšã€‚<br>ä½¿ç”¨ <strong>requests</strong> è¿™ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œå¯ä»¥è½»æ¾åœ°è®¾ç½®ä»£ç†ã€‚<br>å†ä¸¾ä¸ªæ —å­ï¼š<br><div class="hljs"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests

proxies = &#123;
  <span class="hljs-string">&#x27;http&#x27;</span>: <span class="hljs-string">&#x27;http://10.10.1.10:3128&#x27;</span>,
  <span class="hljs-string">&#x27;https&#x27;</span>: <span class="hljs-string">&#x27;http://10.10.1.10:1080&#x27;</span>,
&#125;
requests.get(<span class="hljs-string">&#x27;http://example.org&#x27;</span>, proxies=proxies)</code></pre></div></p><h2 id="å‘é€ -http- è¯·æ±‚"><a href="# å‘é€ -http- è¯·æ±‚" class="headerlink" title="å‘é€ http è¯·æ±‚"></a>å‘é€ http è¯·æ±‚</h2><p>è™½ç„¶è‡ªå¸¦çš„ urllib å’Œ urllib2 åº“å¯ä»¥æ»¡è¶³éœ€æ±‚ï¼Œä½†æ˜¯ä¸æ¨èä½¿ç”¨ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºå®ƒä»¬çš„æ“ä½œå¤ªç¹çï¼Œå°¤å…¶åœ¨å¤„ç†ä¸€äº›å¤æ‚æƒ…å†µæ—¶ï¼Œè¿™ä¸ç¬¦åˆ python çš„è®¾è®¡å“²å­¦ï¼Œæ‰€ä»¥æ”¾æ‰‹æŠ›å¼ƒå®ƒä»¬å§ã€‚<br>æ¨èä½¿ç”¨ <a target="_blank" rel="noopener" href="http://docs.python-requests.org/en/latest/"><strong>requests</strong></a>è¿™ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œæ­£å¦‚å®ƒæ ‡æ¦œçš„é‚£æ ·â€”<strong>Requests: HTTP for Humans</strong>ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒ py3ã€‚<br>ä½¿ç”¨ requests åº“å‘é€è¯·æ±‚æ˜¯å¦‚æ­¤çš„ä¼˜é›…ï¼Œ<br><div class="hljs"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests
r = requests.get(<span class="hljs-string">&#x27;https://api.github.com/events&#x27;</span>)
<span class="hljs-keyword">print</span> r.text</code></pre></div><br>å…·ä½“ä½¿ç”¨æ–¹æ³•å¯ä»¥çœ‹å®˜æ–¹ APIã€‚</p><h2 id="è§£æé¡µé¢"><a href="# è§£æé¡µé¢" class="headerlink" title="è§£æé¡µé¢"></a>è§£æé¡µé¢</h2><p>æ—¢ç„¶è·å–åˆ°äº†è¯·æ±‚é¡µé¢çš„æºç ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯è§£æå·¥ä½œï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæœ‰ä¸‹é¢ä¸‰ä¸ªåº“ç”¨å¾—æ˜¯æœ€å¤šçš„ï¼š<strong>lxml åº“ï¼Œ bs4 åº“ï¼Œä»¥åŠæ­£åˆ™ </strong>ã€‚<br><strong>lxml</strong> è§£æé€Ÿåº¦è¦æ¯” <strong>bs4</strong> å¿«ï¼Œæ®è¯´å¿«å¥½å‡ å€ï¼Œæ­£åˆ™æ˜¯ä¸ªç»ˆç»“æŠ€ï¼Œåªæ˜¯å†™èµ·æ¥æœ‰ç‚¹éº»çƒ¦ã€‚å¦å¤–ï¼Œ bs4 ä¸æ”¯æŒ <strong>xpath</strong>ï¼Œè€Œ lxml æ”¯æŒï¼Œæ€»ä¹‹ï¼Œè§†è‡ªå·±çš„æƒ…å†µé€‰æ‹©äº†ã€‚<br>å‰å‡ å¤©è¿˜æ¥è§¦è¿‡ä¸€ä¸ªåº“ï¼Œåå­—å« <strong>pyquery</strong>ï¼Œå®ƒæ˜¯ jQuery çš„ python å®ç°ï¼Œå¯ä»¥ç”¨äºè§£æ html ç½‘é¡µå†…å®¹ï¼Œç†Ÿæ‚‰ jQuery è¯­æ³•ç«¥é‹çš„ç¦éŸ³ã€‚</p><h3 id="å¦ -bs4- åº“è§£æé‡åˆ°çš„ä¸€ä¸ªé—®é¢˜"><a href="# å¦ -bs4- åº“è§£æé‡åˆ°çš„ä¸€ä¸ªé—®é¢˜" class="headerlink" title="å¦:bs4 åº“è§£æé‡åˆ°çš„ä¸€ä¸ªé—®é¢˜"></a>å¦:bs4 åº“è§£æé‡åˆ°çš„ä¸€ä¸ªé—®é¢˜</h3><p>å‰å‡ å¤©é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œé—®é¢˜æ˜¯è¿™æ ·çš„ï¼Œhtml é¡µé¢çš„æ•°æ®ç»è¿‡ Beautiful Soup åº“çš„è§£æåï¼Œéƒ¨åˆ† html æºç ä¸¢å¤±ï¼Œæ‰¾ä¸åˆ°æƒ³è¦çš„æ•°æ®äº†ï¼Œé—®é¢˜ä»£ç å¦‚ä¸‹ï¼š<br><div class="hljs"><pre><code class="hljs python"><span class="hljs-comment">#! /usr/bin/env python</span>
<span class="hljs-comment"># -*- coding:utf-8 -*-</span>

<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup

url = <span class="hljs-string">&#x27;http://product.pconline.com.cn/mobile/&#x27;</span>
res = requests.get(url)
html = res.text
<span class="hljs-comment"># print html</span>
soup = BeautifulSoup(html, <span class="hljs-string">&#x27;lxml&#x27;</span>)
site = soup.findAll(<span class="hljs-string">&#x27;img&#x27;</span>, class_=<span class="hljs-string">&#x27;pic&#x27;</span>)
<span class="hljs-keyword">print</span> site</code></pre></div><br>è¾“å‡ºç»“æœä¸ºç©ºï¼Œæ²¡æœ‰æƒ³è¦çš„æ•°æ®ã€‚æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œbs åº“æ”¯æŒçš„è§£æåº“æœ‰ lxml, html5lib å’Œ html.parserã€‚ç”¨çš„æœ€å¤šçš„æ˜¯ lxmlï¼Œå› ä¸ºå®ƒçš„è§£æé€Ÿåº¦å¿«ï¼Œå¹¶ä¸”å®¹é”™èƒ½åŠ›å¼ºï¼Œé»˜è®¤ä¹Ÿæ˜¯ä½¿ç”¨è¯¥è§£æå™¨ã€‚<br>å‡ºç°è§£æåæºç ä¸¢å¤±çš„å¯èƒ½åŸå› æœ‰ 2 ä¸ªï¼š</p><ul><li>BeautifulSoup æœ‰æ—¶å€™ä¼šé‡åˆ°éæ³•çš„ï¼Œä¸æ”¯æŒçš„ html æºç è€Œå¯¼è‡´æ— æ³•è§£ææˆ–æ— æ³•æ­£å¸¸è§£æ htmlï¼›</li><li>å¤„ç†çš„æ–‡æ¡£å¤ªå¤§ï¼Œè€Œå¤„ç†çš„è§£æå™¨ç¼“å­˜ä¸å¤Ÿé€ æˆçš„ä¿¡æ¯ä¸¢å¤±ã€‚<br>è¿™é‡Œæ¢ä¸€ä¸ªè§£æå™¨ï¼Œæ¢æˆ <strong>html.parser</strong> å°±å¯ä»¥äº†ã€‚</li></ul><h2 id="ç¼–ç é—®é¢˜"><a href="# ç¼–ç é—®é¢˜" class="headerlink" title="ç¼–ç é—®é¢˜"></a>ç¼–ç é—®é¢˜</h2><p>å°†ç¼–ç è®¾ç½®ä¸º <strong>utf-8</strong><br><div class="hljs"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys
reload(sys)
sys.setdefaultencoding(<span class="hljs-string">&#x27;utf-8&#x27;</span>)</code></pre></div><br>æ€»ä¹‹ï¼Œpy2 ä¸­çš„ç¼–ç é—®é¢˜å¾ˆçƒ¦äººï¼Œåªè¦è§£ç ä¸ç¼–ç ä¸ä¸€è‡´å°±ä¼šå‡ºç°ä¹±ç ã€‚å¯¹ unicode å¯ä»¥ ç¼–ç ï¼Œå…¶ä»–ç¼–ç  decode æˆ unicodeã€‚<br>è¦æ³¨æ„<strong>â€˜helloâ€™</strong> å’Œ <strong>uâ€™helloâ€™</strong> çš„åŒºåˆ«ã€‚</p><h2 id="å¤šçº¿ç¨‹çˆ¬å–"><a href="# å¤šçº¿ç¨‹çˆ¬å–" class="headerlink" title="å¤šçº¿ç¨‹çˆ¬å–"></a>å¤šçº¿ç¨‹çˆ¬å–</h2><h2 id="éªŒè¯ç å¤„ç†"><a href="# éªŒè¯ç å¤„ç†" class="headerlink" title="éªŒè¯ç å¤„ç†"></a> éªŒè¯ç å¤„ç†</h2><h2 id="æ¨¡æ‹Ÿç™»å½•"><a href="# æ¨¡æ‹Ÿç™»å½•" class="headerlink" title="æ¨¡æ‹Ÿç™»å½•"></a> æ¨¡æ‹Ÿç™»å½•</h2><p><span style="font-size:18px"><strong>To be continuedâ€¦</strong></span></p></div><hr><div><div class="post-metas mb-3"><div class="post-meta mr-3"><i class="iconfont icon-category"></i> <a class="hover-with-bg" href="/categories/python/">python</a></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a class="hover-with-bg" href="/tags/%E7%88%AC%E8%99%AB/">çˆ¬è™«</a></div></div><p class="note note-warning">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p><div class="post-prevnext row"><article class="post-prev col-6"><a href="/38f80316.html"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">java ç¬¬ä¸‰æ–¹åŒ…å­¦ä¹ ä¹‹ lombok</span> <span class="visible-mobile">ä¸Šä¸€ç¯‡</span></a></article><article class="post-next col-6"><a href="/f49a9b8a.html"><span class="hidden-mobile">sublime text3 é…ç½® [python ç¯‡]</span> <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article class="comments" id="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zNjg1MS8xMzM4Nw"><script type="text/javascript">function loadLivere(){addScript("https://cdn-city.livere.com/js/embed.dist.js")}waitElementVisible("lv-container",loadLivere)</script><noscript>ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·å…è®¸ JavaScript è¿è¡Œ</noscript></div></article></article></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p><div id="tocbot"></div></div></div></div></div></main><a id="scroll-top-button" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div><footer class="mt-5"><div class="text-center py-3"><div><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="footer-content"><div><span id="timeDate">è½½å…¥å¤©æ•°...</span> <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span><script>var now=new Date;function createtime(){var n=new Date("04/03/2016 00:00:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="ğŸš€ &nbsp"+dnum+"&nbspå¤©",document.getElementById("times").innerHTML=hnum+"&nbspå°æ—¶&nbsp"+mnum+"&nbspåˆ†&nbsp"+snum+"&nbspç§’"}setInterval("createtime()",250)</script></div></div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv"></span> æ¬¡ </span><span id="busuanzi_container_site_uv" style="display:none">æ€»è®¿å®¢æ•° <span id="busuanzi_value_site_uv"></span> äºº</span></div></div></footer><script src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script><script src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js"></script><script src="/js/debouncer.js"></script><script src="/js/main.js"></script><script src="/js/lazyload.js"></script><script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js"></script><script src="/js/clipboard-use.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js"></script><script>$(document).ready(function(){var t=$("#board-ctn").offset().top;tocbot.init({tocSelector:"#tocbot",contentSelector:"#post-body",headingSelector:"h1,h2,h3,h4,h5,h6",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",collapseDepth:3,scrollSmooth:!0,headingsOffset:-t}),0<$(".toc-list-item").length&&$("#toc").css("visibility","visible")})</script><script src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js"></script><script>var typed=new Typed("#subtitle",{strings:["  ","çˆ¬è™«é—®é¢˜æ€»ç»“&nbsp;"],cursorChar:"|",typeSpeed:72,loop:!1});typed.stop(),$(document).ready(function(){$(".typed-cursor").addClass("h2"),typed.start()})</script><script src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js"></script><script>anchors.options = {
      placement: "right",
      visible: "hover",
      
      icon: "Â§"
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))</script><script src="/js/local-search.js"></script><script>var path="/local-search.xml",inputArea=document.querySelector("#local-search-input");inputArea.onclick=function(){searchFunc(path,"local-search-input","local-search-result"),this.onclick=null}</script><script src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js"></script><link rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css"><script>$("#post img:not(.no-zoom img, img[no-zoom]), img[zoom]").each(function(){var t=document.createElement("a");$(t).attr("data-fancybox","images"),$(t).attr("href",$(this).attr("src")),$(this).wrap(t)})</script><script defer>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?14630c2a053c5952e46094f24dabb623";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></body></html>